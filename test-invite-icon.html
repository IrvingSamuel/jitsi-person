<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste √çcone Convidar Pessoas</title>
    <style>
        body {
            font-family: monospace;
            margin: 20px;
            background: #1a1a1a;
            color: #ffffff;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 5px;
            background: #2a2a2a;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .result {
            background: #333;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        .info { color: #2196F3; }
        .code {
            background: #1a1a1a;
            border: 1px solid #444;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
        }
        .new { background: #1b5e20; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üë• Novo √çcone: Convidar Pessoas</h1>
        
        <div class="section">
            <h2>‚ú® Nova Funcionalidade Adicionada</h2>
            <div class="result new">
<strong>√çCONE ADICIONADO:</strong>
üë• Bot√£o "Convidar pessoas" agora tem Lord Icon!

<strong>DETALHES:</strong>
- √çcone: jdgfsfzr.json (pessoa com s√≠mbolo de "+")
- Seletor: [aria-label="Convidar pessoas"]
- Cores: primary:#ffffff,secondary:#ffffff (branco)
- Trigger: hover
- Tamanho: 24x24px

<strong>LOCALIZA√á√ÉO:</strong>
.toolbox-button[aria-label="Convidar pessoas"]
  ‚îî‚îÄ‚îÄ .toolbox-icon
      ‚îú‚îÄ‚îÄ svg (original - hidden)
      ‚îî‚îÄ‚îÄ lord-icon (NOVO - jdgfsfzr.json) ‚ú®

<strong>INTEGRA√á√ÉO:</strong>
‚úÖ Fun√ß√£o replaceInviteIcon() criada
‚úÖ Seletores espec√≠ficos adicionados
‚úÖ MutationObserver configurado
‚úÖ Fun√ß√£o fix() atualizada para permitir √≠cone
‚úÖ Fun√ß√£o clean() atualizada (removido da lista de proibidos)
            </div>
        </div>

        <div class="section">
            <h2>üéØ Testes</h2>
            <button onclick="testJitsiPage()">Abrir Jitsi</button>
            <button onclick="showCommands()">Comandos Espec√≠ficos</button>
            <button onclick="testCurrentPage()">Verificar Implementa√ß√£o</button>
        </div>

        <div class="section">
            <h2>üõ†Ô∏è Comandos Espec√≠ficos para Convite</h2>
            <div id="commands" class="result code">
// 1. Debug espec√≠fico do bot√£o de convite
const inviteBtn = document.querySelector('[aria-label="Convidar pessoas"]');
console.log('Bot√£o Convite:', {
  encontrado: !!inviteBtn,
  ariaLabel: inviteBtn?.getAttribute('aria-label'),
  temLordIcon: !!inviteBtn?.querySelector('lord-icon'),
  lordIconSrc: inviteBtn?.querySelector('lord-icon')?.getAttribute('src')
});

// 2. Verificar se o √≠cone est√° na posi√ß√£o correta
const inviteToolboxIcon = inviteBtn?.querySelector('.toolbox-icon');
console.log('Toolbox Icon do Convite:', {
  existe: !!inviteToolboxIcon,
  temLordIcon: !!inviteToolboxIcon?.querySelector('lord-icon'),
  temSvg: !!inviteToolboxIcon?.querySelector('svg')
});

// 3. For√ßar substitui√ß√£o se necess√°rio
if (inviteBtn && inviteToolboxIcon && !inviteToolboxIcon.querySelector('lord-icon')) {
  console.log('üîÑ For√ßando substitui√ß√£o do √≠cone de convite...');
  jitsiLordIcons.replace();
}

// 4. Debug completo
jitsiLordIcons.debug();

// 5. Verificar todos os √≠cones implementados
['Convidar pessoas', 'Selecionar Fundo', 'Alternar configura√ß√µes', 'Ativar som', 'Ativar c√¢mera'].forEach(label => {
  const btn = document.querySelector(`[aria-label*="${label}"]`);
  const icon = btn?.querySelector('.toolbox-icon lord-icon');
  console.log(`${label}: ${btn ? '‚úÖ' : '‚ùå'} | Lord Icon: ${icon ? '‚úÖ' : '‚ùå'} | Src: ${icon?.getAttribute('src')?.split('/').pop() || 'N/A'}`);
});
            </div>
        </div>

        <div class="section">
            <h2>üìä Status da Implementa√ß√£o</h2>
            <div id="status" class="result">Clique em "Verificar Implementa√ß√£o" para testar</div>
        </div>

        <div class="section">
            <h2>üé≠ Todos os √çcones Implementados</h2>
            <div class="result info">
<strong>LISTA COMPLETA DE √çCONES JITSI:</strong>

üé§ <strong>Microfone:</strong>
   - √çcone: vycwlttg.json
   - Estados: Branco (ligado) / Vermelho (mutado)
   - Seletor: .audio-preview .toolbox-icon

üìπ <strong>C√¢mera:</strong>
   - √çcone: gksubfms.json (ligada) / kqbuxhwp.json (desligada)
   - Estados: Branco (ligada) / Vermelho (desligada)
   - Seletor: .video-preview .toolbox-icon

üë• <strong>Convidar Pessoas:</strong> ‚ú® NOVO
   - √çcone: jdgfsfzr.json
   - Cor: Branco fixo
   - Seletor: [aria-label="Convidar pessoas"]

üñºÔ∏è <strong>Selecionar Fundo:</strong>
   - √çcone: wloilxuq.json
   - Cores: Branco + Azul secund√°rio
   - Seletor: [aria-label="Selecionar Fundo"]

‚öôÔ∏è <strong>Configura√ß√µes:</strong>
   - √çcone: lecprnjb.json
   - Cor: Branco fixo
   - Seletor: [aria-label="Alternar configura√ß√µes"]

<strong>TOTAL: 5 √≠cones implementados! üéâ</strong>
            </div>
        </div>
    </div>

    <script>
        function testJitsiPage() {
            const jitsiUrl = window.location.origin;
            const newWindow = window.open(jitsiUrl, '_blank');
            
            if (newWindow) {
                alert(`Jitsi aberto!\n\nüîç Para testar o novo √≠cone:\n1. Entre na sala\n2. Procure o bot√£o "Convidar pessoas"\n3. Deve ter o √≠cone jdgfsfzr (pessoa com +)\n4. Abra Console (F12) para debug\n5. Execute os comandos espec√≠ficos`);
            } else {
                alert('Popup bloqueado. Acesse: ' + jitsiUrl);
            }
        }

        function showCommands() {
            const commands = document.getElementById('commands');
            commands.scrollIntoView({ behavior: 'smooth' });
            commands.style.border = '2px solid #4CAF50';
            setTimeout(() => {
                commands.style.border = '1px solid #444';
            }, 2000);
        }

        function testCurrentPage() {
            const status = document.getElementById('status');
            let result = '';
            
            const isJitsi = window.location.pathname === '/' || window.location.href.includes('jitsi');
            result += `üåê P√°gina: ${isJitsi ? 'Jitsi Meet' : 'P√°gina de teste'}\n`;
            
            if (isJitsi) {
                const ourLibLoaded = typeof window.jitsiLordIcons !== 'undefined';
                result += `üìö Biblioteca: ${ourLibLoaded ? '‚úÖ Carregada' : '‚ùå N√£o carregada'}\n\n`;
                
                if (ourLibLoaded) {
                    // Verificar se a fun√ß√£o replaceInviteIcon existe (n√£o est√° exposta globalmente)
                    const scriptContent = document.querySelector('script[src*="jitsi-lord-icons"]')?.textContent || '';
                    const hasInviteFunction = scriptContent.includes('replaceInviteIcon') || 
                                            document.documentElement.innerHTML.includes('replaceInviteIcon');
                    result += `üîß Fun√ß√£o replaceInviteIcon: ${hasInviteFunction ? '‚úÖ Implementada' : '‚ùå N√£o encontrada'}\n\n`;
                    
                    // Verificar bot√£o "Convidar pessoas"
                    const inviteButton = document.querySelector('[aria-label*="Convidar"]');
                    if (inviteButton) {
                        const inviteToolboxIcon = inviteButton.querySelector('.toolbox-icon');
                        const inviteIcons = inviteToolboxIcon?.querySelectorAll('lord-icon') || [];
                        const lordIconSrc = inviteIcons[0]?.getAttribute('src');
                        
                        result += `üë• BOT√ÉO CONVIDAR PESSOAS:\n`;
                        result += `   Encontrado: ‚úÖ\n`;
                        result += `   Aria-label: "${inviteButton.getAttribute('aria-label')}"\n`;
                        result += `   Toolbox Icon: ${inviteToolboxIcon ? '‚úÖ' : '‚ùå'}\n`;
                        result += `   Lord Icons: ${inviteIcons.length} ${inviteIcons.length === 1 ? '‚úÖ' : (inviteIcons.length === 0 ? '‚è≥' : '‚ùå')}\n`;
                        
                        if (inviteIcons.length > 0) {
                            const expectedSrc = 'jdgfsfzr.json';
                            const actualSrc = lordIconSrc?.split('/').pop();
                            result += `   Src: ${actualSrc}\n`;
                            result += `   √çcone correto: ${actualSrc === expectedSrc ? '‚úÖ' : '‚ùå'}\n`;
                            result += `   Cores: ${inviteIcons[0].getAttribute('colors')}\n`;
                        } else {
                            result += `   Status: ‚è≥ Aguardando substitui√ß√£o\n`;
                            result += `   üí° Execute: jitsiLordIcons.replace()\n`;
                        }
                        result += `\n`;
                    } else {
                        result += `üë• BOT√ÉO CONVIDAR: ‚ùå N√£o encontrado\n\n`;
                    }
                    
                    // Resumo de todos os √≠cones
                    const iconButtons = [
                        { label: 'Ativar som', expected: 'vycwlttg.json' },
                        { label: 'Ativar c√¢mera', expected: 'gksubfms.json' },
                        { label: 'Convidar pessoas', expected: 'jdgfsfzr.json' },
                        { label: 'Selecionar Fundo', expected: 'wloilxuq.json' },
                        { label: 'Alternar configura√ß√µes', expected: 'lecprnjb.json' }
                    ];
                    
                    result += `üìä RESUMO TODOS OS √çCONES:\n`;
                    let totalImplemented = 0;
                    
                    iconButtons.forEach(({ label, expected }) => {
                        const btn = document.querySelector(`[aria-label*="${label}"]`);
                        const icon = btn?.querySelector('.toolbox-icon lord-icon');
                        const actualSrc = icon?.getAttribute('src')?.split('/').pop();
                        const isCorrect = actualSrc === expected;
                        
                        if (isCorrect) totalImplemented++;
                        
                        result += `   ${label}: ${btn ? '‚úÖ' : '‚ùå'} | Icon: ${icon ? '‚úÖ' : '‚ùå'} | ${isCorrect ? '‚úÖ' : '‚ùå'}\n`;
                    });
                    
                    result += `\nüéØ TOTAL IMPLEMENTADOS: ${totalImplemented}/5 √≠cones\n`;
                    
                    if (totalImplemented < 5) {
                        result += `\nüîÑ Para completar: jitsiLordIcons.replace()\n`;
                    } else {
                        result += `\nüéâ TODOS OS √çCONES IMPLEMENTADOS COM SUCESSO!\n`;
                    }
                    
                } else {
                    result += `‚ùå Biblioteca n√£o carregada. Recarregue a p√°gina.\n`;
                }
            } else {
                result += `\n‚ö†Ô∏è Para testar, acesse o Jitsi Meet.\n`;
            }
            
            status.textContent = result;
            status.className = 'result ' + (isJitsi ? 'success' : 'info');
        }

        // Auto-test se estivermos no Jitsi
        setTimeout(() => {
            if (window.location.pathname === '/' || window.location.href.includes('jitsi')) {
                testCurrentPage();
                // Re-testar ap√≥s um tempo para capturar mudan√ßas
                setTimeout(testCurrentPage, 5000);
                setTimeout(testCurrentPage, 10000);
            }
        }, 3000);
    </script>
</body>
</html>